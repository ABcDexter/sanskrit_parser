# -*- coding: utf-8 -*-
# Sutras for ac sandhi
#  @author: kmadathil

# Sutra: Name
# Id: <adhyAya.pAda.sutra>
# Condition: boolean
# Trigger: (list of) global triggers needed to enable this rule
# Xform: dict of transformations
# Update: trigger updates
#   (list of) trigger: condition: <c> value: v 
# Every boolean is a(n or reduced list of) var: <value> and conditions
#     l: a - l is savarna of a varna
#     l: ut - l is short u varna
#     r: ku - l is kavarga
#     r: _ac - r is in pratyahara "ac"
#     r: $l  - r is savarna of l (variable)
# Defined variables, can be used as lvalues and rvalues in xform and
# lvalues in conditions. To use a variable as rvalue in a condition, prefix with $
#   lp = left pada
#   rp = right pada
#   l = last varna of left pada
#   r = first varna of right pada
#  ll = second last varna of left pada
#  rr = second varna of right pada
#  lc = left pada except last varna
#  rc = right pada except first varna

# ac sandhi

-   sutra: aad guRaH
    id: 6.1.87
    condition:
       l: a
       r: _ik
    xform:
       l: null
       r: guna(r)
    trigger: null
    update:
      uran_trigger:
          value: True
          condition:
             r: f

-   sutra: vfdDireci
    id: 6.1.88
    condition:
       l: a
       r: _ec
    xform:
       l: null
       r: vriddhi(r)
    trigger: null
    update: null
             
-   sutra: uraRraparaH
    id: 1.1.51
    condition: null
    xform:
       r: r+"r"
    trigger: uran_trigger 
    update:
      uran_trigger:
          value: False

-   sutra: ikoyaRaci
    id: 6.1.77
    condition:
      l: _ik
      r: _ac
    xform:
      l: ikoyan(l)
       
-   sutra: ecoyavAyAvaH
    id: 6.1.78
    condition:
      l: _ec
      r: _ac
    xform:
       l: ayavayav(l)
       
-   sutra: akaHsavarRedIrGaH
    id: 6.1.101
    condition:
      l: _ak
      r: $l
    xform:
      l: dirgha(l)
      r: null

-   sutra: eNaHpadAntAdati
    id: 6.1.109
    condition:
      l: _eN
      r: at
    xform:
      r: null


# visarga sandhi

# hal sandhi

- sutra: स्तोः श्चुना श्चुः
  id: 8.5.50
  condition:
      - l: [s, tu]
        r: [S, cu]
      - l: [S, cu]
        r: [s, tu]
  xform:
      r: shcutva(r)
      l: shcutva(l)

- sutra: ष्टुना ष्टुः
  id: 8.5.51
  condition:
      - l: [s, tu]
        r: [z, wu]
      - l: [z, wu]
        r: [s, tu]
  xform:
      r: zwutva(r)
      l: zwutva(l)

# FIXME - implement the anaam
- sutra: न पदान्ताट्टोरनाम्
  id: 8.5.52
  overrides: 8.5.51
  condition:
      - l: wu
        r: [s, tu]
  xform:
- sutra: न पदान्ताट्टोरनाम्
  id: 8.5.52.1
  overrides: 8.5.52
  condition:
      - l: wu
        rp: [=nAm, =navatis, =nagaris]
  xform:
        r: zwutva(r)
        
- sutra: तोः षि
  id: 8.5.54
  overrides: 8.5.51
  condition:
      - l: tu
        r: z
  xform:
- sutra: शात्
  id: 8.5.55
  overrides: 8.5.50
  condition:
      - l: S
        r: [s, tu]
  xform:

